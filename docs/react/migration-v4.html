<!DOCTYPE html>
<html lang="zh" data-direction="ltr">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>V3 to V4 - Ant Design</title>
    <meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" property="og:image" content="https://avatars2.githubusercontent.com/u/20906580?s=200&v=4"/><meta data-rh="true" property="og:title" content="V3 to V4 - Ant Design"/><meta data-rh="true" name="description" content="This document will help you upgrade from antd 3.x version to antd 4.x version. If you are using 2.x or older version, please refer to the previous upgrade document to 3.x."/>
    <link
      rel="icon"
      href="https://avatars2.githubusercontent.com/u/20906580?s=200&v=4"
      type="image/x-icon"
    />
    
    <link rel="stylesheet" type="text/css" href="/index-cee14675.css" />
    
    <style id="nprogress-style">
      #nprogress {
        display: none;
      }
    </style>
    <link rel="stylesheet/less" type="text/css" href="/color.less" />
    <script src="https://polyfill.alicdn.com/polyfill.min.js?features=default,es2015,Intl"></script>
    <script>
      (function() {
        function isLocalStorageNameSupported() {
          var testKey = 'test';
          var storage = window.localStorage;
          try {
            storage.setItem(testKey, '1');
            storage.removeItem(testKey);
            return true;
          } catch (error) {
            return false;
          }
        }
        // 优先级提高到所有静态资源的前面，语言不对，加载其他静态资源没意义
        var pathname = location.pathname;

        function isZhCN(pathname) {
          return /-cn\/?$/.test(pathname);
        }
        function getLocalizedPathname(path, zhCN) {
          var pathname = path.startsWith('/') ? path : '/' + path;
          if (!zhCN) {
            // to enUS
            return /\/?index-cn/.test(pathname) ? '/' : pathname.replace('-cn', '');
          } else if (pathname === '/') {
            return '/index-cn';
          } else if (pathname.endsWith('/')) {
            return pathname.replace(/\/$/, '-cn/');
          }
          return pathname + '-cn';
        }

        // 兼容旧的 URL， `?locale=...`
        var queryString = location.search;
        if (queryString) {
          var isZhCNConfig = queryString.indexOf('zh-CN') > -1;
          if (isZhCNConfig && !isZhCN(pathname)) {
            location.pathname = getLocalizedPathname(pathname, isZhCNConfig);
          }
        }

        // 首页无视链接里面的语言设置 https://github.com/ant-design/ant-design/issues/4552
        if (isLocalStorageNameSupported() && (pathname === '/' || pathname === '/index-cn')) {
          var lang =
            (window.localStorage && localStorage.getItem('locale')) ||
            ((navigator.language || navigator.browserLanguage).toLowerCase() === 'zh-cn'
              ? 'zh-CN'
              : 'en-US');
          // safari is 'zh-cn', while other browser is 'zh-CN';
          if ((lang === 'zh-CN') !== isZhCN(pathname)) {
            location.pathname = getLocalizedPathname(pathname, lang === 'zh-CN');
          }
        }
        document.documentElement.className += isZhCN(pathname) ? 'zh-cn' : 'en-us';
      })();
    </script>
  </head>
  <body>
    <div id="react-content">
      <div class="page-wrapper"><header id="header" class="clearfix"><div class="ant-row" style="flex-flow:nowrap;height:64px"><div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-6 ant-col-xl-5 ant-col-xxl-4"><h1><a id="logo" href="/index-cn"><img alt="logo" src="https://avatars2.githubusercontent.com/u/20906580?s=200&amp;v=4"/>Micro 中国</a></h1></div><div class="ant-col menu-row ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-18 ant-col-xl-19 ant-col-xxl-20"><div id="search-box" class=""><span role="img" aria-label="search" class="anticon anticon-search"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="search" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"></path></svg></span><input type="text" placeholder="在 Micro China 中搜索" class="ant-input" value=""/></div><ul class="ant-menu menu-site ant-menu-light ant-menu-root ant-menu-horizontal" id="nav" direction="ltr" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child ant-menu-item-selected" role="menuitem"><a href="/docs/react/introduce-cn">文档</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a href="/components/button-cn/">插件</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a href="/docs/resources-cn">资源</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul><button type="button" class="ant-btn header-button header-lang-button ant-btn-sm">繁体中文</button><button type="button" class="ant-btn header-button ant-dropdown-trigger ant-btn-sm">更多<span role="img" aria-label="down" style="font-size:9px;margin-left:2px;vertical-align:middle;margin-top:-1px" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></span></button><span id="github-btn" class="github-btn"><a class="gh-btn" href="//github.com/micro/go-micro/" target="_blank"><span class="gh-ico" aria-hidden="true"></span><span class="gh-text">Star</span></a><a class="gh-count" target="_blank" href="//github.com/micro/go-micro/stargazers/"></a></span></div></div></header><div class="main-wrapper"><div class="ant-row"><div class="ant-col main-menu ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-6 ant-col-xl-5 ant-col-xxl-4"><div><div class=""><section class="main-menu-inner"><ul class="ant-menu aside-container menu-site ant-menu-light ant-menu-root ant-menu-inline" direction="ltr" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:30px"><a href="/docs/react/introduce-cn">Ant Design of React</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:30px"><a href="/docs/react/getting-started-cn">Getting Started</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:30px"><a href="/docs/react/practical-projects-cn">Real project with umi and dva</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:30px"><a href="/docs/react/use-with-create-react-app-cn">Use in create-react-app</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:30px"><a href="/docs/react/use-in-typescript-cn">Use in TypeScript</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:30px"><a href="/changelog-cn">Change Log</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:30px"><a href="/docs/react/customize-theme-cn">Customize Theme</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:30px"><a href="/docs/react/replace-moment-cn">Replace Moment.js</a></li><li class="ant-menu-item ant-menu-item-only-child ant-menu-item-selected" role="menuitem" style="padding-left:30px"><a href="/docs/react/migration-v4-cn">V3 to V4</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:30px"><a href="/docs/react/recommendation-cn">Third-Party Libraries</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:30px"><a href="/docs/react/i18n-cn">Internationalization</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:30px"><a href="/docs/react/faq-cn">FAQ</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:30px"><a href="/docs/react/contributing-cn">Contributing</a></li></ul></section></div></div></div><div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-18 ant-col-lg-18 ant-col-xl-19 ant-col-xxl-20"><section class="main-container"><article class="markdown"><div><h1>V3 to V4<a class="edit-button" href="https://github.com/ant-design/ant-design/edit/master/docs/react/migration-v4.en-US.md" target="_blank" rel="noopener noreferrer"><span role="img" aria-label="edit" class="anticon anticon-edit"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="edit" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path></svg></span></a></h1></div><div class="toc-affix"><div class=""><ul class="toc"><li><a class="bisheng-toc-h2" href="#Upgrade-preparation" title="Upgrade preparation">Upgrade preparation</a></li><li><a class="bisheng-toc-h2" href="#Incompatible-changes-in-v4" title="Incompatible changes in v4">Incompatible changes in v4</a></li><li><a class="bisheng-toc-h2" href="#Start-upgrading" title="Start upgrading">Start upgrading</a></li><li><a class="bisheng-toc-h2" href="#Encounter-problems" title="Encounter problems">Encounter problems</a></li></ul></div></div><section class="markdown"><p>This document will help you upgrade from antd <code>3.x</code> version to antd <code>4.x</code> version. If you are using <code>2.x</code> or older version, please refer to the previous <a href="https://github.com/ant-design/ant-design/blob/2adf8ced24da7b3cb46a3475854a83d76a98c536/CHANGELOG.en-US.md#300">upgrade document</a> to 3.x.</p><h2 id="Upgrade-preparation"><span>Upgrade preparation</span><a href="#Upgrade-preparation" class="anchor">#</a></h2><ol><li><p>Please upgrade to the latest version of 3.x first, and remove / modify related APIs according to the console warning message.</p></li><li><p>Upgrade project React 16.12.0 or above.</p><ul><li><p>If you are still using React 15, please refer to <a href="https://reactjs.org/blog/2017/09/26/react-v16.0.html#breaking-changes">React 16 Upgrade Documentation</a>.</p></li><li><p>For the remaining React 16 obsolete lifecycle APIs, please refer to <a href="https://reactjs.org/blog/2018/03/27/update-on-async-rendering.html#gradual-migration-path">Migration Guide</a>.</p></li></ul></li></ol><h2 id="Incompatible-changes-in-v4"><span>Incompatible changes in v4</span><a href="#Incompatible-changes-in-v4" class="anchor">#</a></h2><h3 id="Design-specification"><span>Design specification</span><a href="#Design-specification" class="anchor">#</a></h3><ul><li><p>Line height changes from <code>1.5</code>(<code>21px</code>) to <code>1.5715</code>(<code>22px</code>).</p></li><li><p>Basic rounded corner adjustment, changed from <code>4px</code> to <code>2px</code>.</p></li><li><p>Exchanged Selected and Hovered color.</p></li><li><p>Global shadow optimization, adjusted to three layers of shadows to distinguish control hierarchies.</p></li><li><p>Icon in the bubble confirmation box has been changed from a question mark to an exclamation mark.</p></li><li><p>The color of selected components is changed to <code>@blue-1: #E6F7FF</code>, and the corresponding hover color is changed to <code>@gray-2: #FAFAFA</code>.</p></li><li><p>The color of the error was adjusted from <code>@red-5: #F5222D</code> to<code>@red-5: #FF4D4F</code>.</p></li><li><p>The color brightness of the dividing line has been reduced from <code>#E8E8E8</code> to<code>#F0F0F0</code>.</p></li><li><p>DatePicker interactive redo, range selection can now select start and end time separately.</p></li><li><p>Table change default background color from transparent to white.</p></li><li><p>Smaller Tabs bar width.</p></li></ul><h3 id="Compatibility"><span>Compatibility</span><a href="#Compatibility" class="anchor">#</a></h3><ul><li><p>The minimum supported version of IE is IE 11.</p></li><li><p>The minimum supported version of React is React 16.9, and some components have started to refactor using hooks.</p></li></ul><h4 id="Remove-deprecated-API"><span>Remove deprecated API</span><a href="#Remove-deprecated-API" class="anchor">#</a></h4><ul><li><p>LocaleProvider has been removed, please use <code>ConfigProvider</code> instead.</p></li><li><p>Mention removed, use <code>Mentions</code> instead.</p></li><li><p>Removed the <code>iconType</code> property of Alert. Please use <code>icon</code> instead.</p></li><li><p>Removed the <code>iconType</code> attribute of Modal.xxx. Please use <code>icon</code> instead.</p></li><li><p>Removed the Form.create method, <code>form</code> is now available in <code>Form.useForm</code>.</p></li><li><p>Removed the <code>id</code> attribute of Form.Item. Please use <code>htmlFor</code> instead.</p></li><li><p>The <code>setContentRef</code> property of Typography has been removed, please use <code>ref</code> instead.</p></li><li><p>Removed the <code>allowEmpty</code> property of TimePicker, please use <code>allowClear</code> instead.</p></li><li><p>Removed <code>AfterClose</code> attribute of Tag, please use <code>OnClose</code> instead.</p></li><li><p>Removed the <code>noHovering</code> property of Card, please use <code>hoverable</code> instead.</p></li><li><p>Removed the <code>vertical</code> property of Carousel. Please use <code>dotPosition</code> instead.</p></li><li><p>Removed <code>wrapClassName</code> property of Drawer, please use <code>className</code> instead.</p></li><li><p>Removed the <code>autosize</code> property of TextArea. Please use <code>autoSize</code> instead.</p></li><li><p>Removed the <code>offset</code> attribute of Affix. Please use <code>offsetTop</code> instead.</p></li><li><p>Removed the <code>onSearchChange</code> property of Transfer. Please use <code>onSearch</code> instead.</p></li><li><p>Removed the <code>body</code> attribute of Transfer. Please use <code>children</code> instead.</p></li><li><p>Removed the <code>lazy</code> attribute of Transfer, which did not really optimize the effect.</p></li><li><p>Removed <code>combobox</code> mode, please use <code>AutoComplete</code> instead.</p></li></ul><h4 id="Icon-upgrade"><span>Icon upgrade</span><a href="#Icon-upgrade" class="anchor">#</a></h4><p>In <code>antd @ 3.9.0</code>, we introduced the svg icon (<a href="Https://github.com/ant-design/ant-design/issues/10353">Why use the svg icon?</a>). The icon API using the string name cannot be loaded on demand, so the svg icon file is fully introduced, which greatly increases the size of the packaged product. In 4.0, we adjusted the icon usage API to support tree shaking, reducing the default package size of antd by about 150 KB (Gzipped).</p><p>Legacy Icon usage will be discarded:</p><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Icon<span class="token punctuation">,</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Demo <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Icon</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>smile<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>smile<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>It will be imported on demand in v4:</p><pre class="language-diff"><code>  import { Button } from 'antd';

  // tree-shaking supported
<span class="token deleted">- import { Icon } from 'antd';</span>
<span class="token inserted">+ import { SmileOutlined } from '@ant-design/icons';</span>

  const Demo = () => (
      &lt;div>
<span class="token deleted">-       &lt;Icon type="smile" /></span>
<span class="token inserted">+       &lt;SmileOutlined /></span>
      &lt;Button icon={&lt;SmileOutlined />} />
    &lt;/div>
  );

  // or directly import
  import SmileOutlined from '@ant-design/icons/SmileOutlined';</code></pre><p>You will still be able to continue using the compatibility pack:</p><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Icon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/compatible'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Demo <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Icon</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>smile<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>smile<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="Component-refactoring"><span>Component refactoring</span><a href="#Component-refactoring" class="anchor">#</a></h4><ul><li><p>Form rewrite.</p><ul><li><p>No need to use <code>Form.create</code>.</p></li><li><p>Nest fields definition changes from <code>&#x27;xxx.yyy&#x27;</code> to <code>[&#x27;xxx&#x27;, &#x27;yyy&#x27;]</code>.</p></li><li><p>See <a href="/components/form/v3/">here</a> for migration documentation.</p></li></ul></li><li><p>DatePicker rewrite</p><ul><li><p>Provide the <code>picker</code> property for selector switching.</p></li><li><p>Range selection can now select start and end times individually.</p></li><li><p><code>onPanelChange</code> will also trigger when panel value changed.</p></li><li><p><a href="/components/date-picker/#components-date-picker-demo-date-render">Date cell className of Custom style demo</a> changed from <code>ant-calendar-date</code> to <code>ant-picker-cell-inner</code>.</p></li></ul></li><li><p>Tree, Select, TreeSelect, AutoComplete rewrite</p><ul><li><p>use virtual scrolling.</p></li><li><p><code>onBlur</code> no longer trigger value change.</p></li><li><p>AutoComplete no longer support <code>optionLabelProp</code>. Please set Option <code>value</code> directly.</p></li><li><p>Select remove <code>dropdownMenuStyle</code> prop.</p></li></ul></li><li><p>The Grid component uses flex layout.</p></li><li><p>Button&#x27;s <code>danger</code> is now treated as a property instead of a button type.</p></li><li><p>Input, Select set <code>value</code> to <code>undefined</code> is uncontrolled mode now.</p></li><li><p>Table rewrite.</p><ul><li><p>will keep at least one column even if <code>columns</code> is empty.</p></li><li><p>Nest <code>dataIndex</code> definition changes from <code>&#x27;xxx.yyy&#x27;</code> to <code>[&#x27;xxx&#x27;, &#x27;yyy&#x27;]</code>.</p></li></ul></li><li><p>Pagination will default set <code>showSizeChanger</code> to <code>true</code> since <code>4.1.0</code>. This change also applied on Table component.</p></li></ul><pre class="language-diff"><code><span class="token deleted">&lt;Table</span>
  columns={[
    {
      title: 'Age',
<span class="token deleted">-     dataIndex: 'user.age',</span>
<span class="token inserted">+     dataIndex: ['user', 'age'],</span>
    },
  ]}
/></code></pre><h2 id="Start-upgrading"><span>Start upgrading</span><a href="#Start-upgrading" class="anchor">#</a></h2><p>You can manually check the code one by one against the above list for modification. In addition, we also provide a codemod cli tool <a href="https://github.com/ant-design/codemod-v4">@ant-design/codemod-v4</a> To help you quickly upgrade to v4.</p><p>Before running codemod cli, please submit your local code changes.</p><pre class="language-shell"><code># Run directly through npx
npx <span class="token operator">-</span>p <span class="token variable">@ant</span><span class="token operator">-</span>design<span class="token operator">/</span>codemod<span class="token operator">-</span>v4 antd4<span class="token operator">-</span>codemod src

# <span class="token operator">Or</span> <span class="token keyword">global</span> installation
# Use npm
npm i <span class="token operator">-</span>g <span class="token variable">@ant</span><span class="token operator">-</span>design<span class="token operator">/</span>codemod<span class="token operator">-</span>v4
# Use yarn
yarn <span class="token keyword">global</span> add <span class="token variable">@ant</span><span class="token operator">-</span>design<span class="token operator">/</span>codemod<span class="token operator">-</span>v4

# Execute
antd4<span class="token operator">-</span>codemod src</code></pre><p><img src="https://gw.alipayobjects.com/mdn/rms_08e378/afts/img/A*QdcbQoLC-cQAAAAAAAAAAABkARQnAQ" alt="codemod running" width="720"/></p><p>For parts that cannot be modified automatically, codemod will prompt on the command line, and it is recommended to modify them manually as prompted. After modification, you can run the above command repeatedly to check.</p><p><img src="https://gw.alipayobjects.com/mdn/rms_08e378/afts/img/A*KQwWSrPirlUAAAAAAAAAAABkARQnAQ" alt="contains an invalid icon" width="720"/></p><blockquote><p>Note that codemod cannot cover all scenarios, and it is recommended to check for incompatible changes one by one.</p></blockquote><h3 id="Migration-tool-modification-details"><span>Migration tool modification details</span><a href="#Migration-tool-modification-details" class="anchor">#</a></h3><p><code>@ant-design/codemod-v4</code> will help you migrate to antd v4. Obsolete components will be kept running through @ant-design/compatible. Generally, you don&#x27;t need to migrate manually. The following sections detail the overall migration and changes.</p><h4 id="Import-the-obsolete-Form-and-Mention-components-via-@ant-design/compatible-package"><span>Import the obsolete Form and Mention components via @ant-design/compatible package</span><a href="#Import-the-obsolete-Form-and-Mention-components-via-@ant-design/compatible-package" class="anchor">#</a></h4><pre class="language-diff"><code><span class="token deleted">- import { Form, Input, Button, Mention } from 'antd';</span>
<span class="token inserted">+ import { Form, Mention } from '@ant-design/compatible';</span>
<span class="token inserted">+ import '@ant-design/compatible/assets/index.css';</span>
<span class="token inserted">+ import { Input, Button } from 'antd';</span>

  ReactDOM.render( (
    &lt;div>
      &lt;Form>
        {getFieldDecorator('username')(&lt;Input />)}
        &lt;Button>Submit&lt;/Button>
      &lt;/Form>
      &lt;Mention
        style={{ width: '100%' }}
        onChange={onChange}
        defaultValue={toContentState('@afc163')}
        defaultSuggestions={['afc163', 'benjycui']}
        onSelect={onSelect}
      />
    &lt;/div>
  );</code></pre><blockquote><p><strong>Note:</strong> Old Form imported from <code>@ ant-design / compatible</code> has change the class name from <code>.ant-form</code> to <code>.ant-legacy-form</code>. Need to be modified accordingly if override the style.</p></blockquote><h4 id="Replace-component&#x27;s-string-icon-prop-with-the-new-@ant-design/icons"><span>Replace component&#x27;s string icon prop with the new <code>@ant-design/icons</code></span><a href="#Replace-component&#x27;s-string-icon-prop-with-the-new-@ant-design/icons" class="anchor">#</a></h4><pre class="language-diff"><code>  import { Avatar, Button, Result } from 'antd';
<span class="token inserted">+ import { QuestionOutlined, UserOutlined } from '@ant-design/icons';</span>

  ReactDOM.render(
    &lt;div>
<span class="token deleted">-     &lt;Button type="primary" shape="circle" icon="search" /></span>
<span class="token inserted">+     &lt;Button type="primary" shape="circle" icon={SearchOutlined} /></span>
<span class="token deleted">-     &lt;Avatar shape="square" icon="user" /></span>
<span class="token inserted">+     &lt;Avatar shape="square" icon={UserOutlined} /></span>
      &lt;Result
<span class="token deleted">-       icon="question"</span>
<span class="token inserted">+       icon={&lt;QuestionOutlined />}</span>
        title="Great, we have done all the operations!"
        extra={&lt;Button type="primary">Next&lt;/Button>}
      />
    &lt;/div>,
    mountNode,
  );</code></pre><h4 id="Replace-v3-Icon-with-@ant-design/icons"><span>Replace v3 Icon with <code>@ant-design/icons</code></span><a href="#Replace-v3-Icon-with-@ant-design/icons" class="anchor">#</a></h4><pre class="language-diff"><code><span class="token deleted">- import { Icon, Input } from 'antd';</span>
<span class="token inserted">+ import { Input } from 'antd';</span>
<span class="token inserted">+ import Icon, { CodeFilled, SmileOutlined, SmileTwoTone } from '@ant-design/icons';</span>

  const HeartSvg = () => (
    &lt;svg width="1em" height="1em" fill="currentColor" viewBox="0 0 1024 1024">
      &lt;path d="M923 plapla..." />
    &lt;/svg>
  );

  const HeartIcon = props => &lt;Icon component={HeartSvg} {...props} />;

  ReactDOM.render(
    &lt;div>
<span class="token deleted">-     &lt;Icon type="code" theme="filled" /></span>
<span class="token inserted">+     &lt;CodeFilled /></span>
<span class="token deleted">-     &lt;Icon type="smile" theme="twoTone" twoToneColor="#eb2f96" /></span>
<span class="token inserted">+     &lt;SmileTwoTone twoToneColor="#eb2f96" /></span>
<span class="token deleted">-     &lt;Icon type="code" theme={props.fill ? 'filled' : 'outlined'} /></span>
<span class="token inserted">+     &lt;LegacyIcon type="code" theme={props.fill ? 'filled' : 'outlined'} /></span>
      &lt;HeartIcon />
      &lt;Icon viewBox="0 0 24 24">
        &lt;title>Cool Home&lt;/title>
        &lt;path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
      &lt;/Icon>
      &lt;Input suffix={&lt;SmileOutlined />} />
    &lt;/div>,
    mountNode,
  );</code></pre><h4 id="Replace-v3-LocaleProvider-with-v4-ConfigProvider"><span>Replace v3 LocaleProvider with v4 ConfigProvider</span><a href="#Replace-v3-LocaleProvider-with-v4-ConfigProvider" class="anchor">#</a></h4><pre class="language-diff"><code><span class="token deleted">- import { LocaleProvider } from 'antd';</span>
<span class="token inserted">+ import { ConfigProvider } from 'antd';</span>

  ReactDOM.render(
<span class="token deleted">-   &lt;LocaleProvider {...yourConfig}></span>
<span class="token inserted">+   &lt;ConfigProvider {...yourConfig}></span>
      &lt;Main />
<span class="token deleted">-   &lt;/LocaleProvider></span>
<span class="token inserted">+   &lt;/ConfigProvider></span>
    mountNode,
  );</code></pre><h4 id="Replace-Modal.method()-icon-string-with-@ant-design/icons"><span>Replace <code>Modal.method()</code> icon string with <code>@ant-design/icons</code></span><a href="#Replace-Modal.method()-icon-string-with-@ant-design/icons" class="anchor">#</a></h4><pre class="language-diff"><code>  import { Modal } from 'antd';
<span class="token inserted">+ import { AntDesignOutlined } from '@ant-design/icons';</span>

  Modal.confirm({
<span class="token deleted">-  icon: 'ant-design',</span>
<span class="token inserted">+  icon: &lt;AntDesignOutlined />,</span>
   title: 'Do you Want to delete these items?',
   content: 'Some descriptions',
   onOk() {
     console.log('OK');
   },
   onCancel() {
     console.log('Cancel');
   },
 });</code></pre><h2 id="Encounter-problems"><span>Encounter problems</span><a href="#Encounter-problems" class="anchor">#</a></h2><p>v4 made a lot of detailed improvements and refactoring. We collected all known incompatible changes and related impacts as much as possible, but there may be some scenarios we have not considered. If you encounter problems during the upgrade, please go to <a href="http://new-issue.ant.design/">GitHub issues</a> and <a href="https://github.com/ant-design/codemod-v4/issues">codemod Issues</a> for feedback. We will respond and improve this document as soon as possible.</p></section><section class="markdown api-container"></section></article><div class="contributors-list" style="display:flex;list-style:none;margin:0;padding:0"><span style="opacity:0.3" class="ant-avatar ant-avatar-circle"><span class="ant-avatar-string" style="opacity:0"></span></span></div></section><section class="prev-next-nav"><a class="prev-page" href="/docs/react/replace-moment-cn"><span role="img" aria-label="left" class="anticon anticon-left footer-nav-icon-before"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></span>Replace Moment.js<span role="img" aria-label="right" class="anticon anticon-right footer-nav-icon-after"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"></path></svg></span></a><a class="next-page" href="/docs/react/recommendation-cn"><span role="img" aria-label="left" class="anticon anticon-left footer-nav-icon-before"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></span>Third-Party Libraries<span role="img" aria-label="right" class="anticon anticon-right footer-nav-icon-after"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"></path></svg></span></a></section><footer class="rc-footer rc-footer-dark"><section class="rc-footer-container"><section class="rc-footer-columns"><div class="rc-footer-column"><h2>相关资源</h2><div class="rc-footer-item"><a href="https://pro.ant.design" target="_blank">Ant Design Pro</a></div></div><div class="rc-footer-column"><h2>社区</h2><div class="rc-footer-item"><a href="https://github.com/websemantics/awesome-ant-design" target="_blank"><span class="rc-footer-item-icon"><span role="img" aria-label="ant-design" class="anticon anticon-ant-design"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="ant-design" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M716.3 313.8c19-18.9 19-49.7 0-68.6l-69.9-69.9.1.1c-18.5-18.5-50.3-50.3-95.3-95.2-21.2-20.7-55.5-20.5-76.5.5L80.9 474.2a53.84 53.84 0 000 76.4L474.6 944a54.14 54.14 0 0076.5 0l165.1-165c19-18.9 19-49.7 0-68.6a48.7 48.7 0 00-68.7 0l-125 125.2c-5.2 5.2-13.3 5.2-18.5 0L189.5 521.4c-5.2-5.2-5.2-13.3 0-18.5l314.4-314.2c.4-.4.9-.7 1.3-1.1 5.2-4.1 12.4-3.7 17.2 1.1l125.2 125.1c19 19 49.8 19 68.7 0zM408.6 514.4a106.3 106.2 0 10212.6 0 106.3 106.2 0 10-212.6 0zm536.2-38.6L821.9 353.5c-19-18.9-49.8-18.9-68.7.1a48.4 48.4 0 000 68.6l83 82.9c5.2 5.2 5.2 13.3 0 18.5l-81.8 81.7a48.4 48.4 0 000 68.6 48.7 48.7 0 0068.7 0l121.8-121.7a53.93 53.93 0 00-.1-76.4z"></path></svg></span></span>Awesome Ant Design</a></div><div class="rc-footer-item"><a href="/docs/resources-cn#加入我们"><span class="rc-footer-item-icon"><span role="img" aria-label="usergroup-add" class="anticon anticon-usergroup-add"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="usergroup-add" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M892 772h-80v-80c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v80h-80c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h80v80c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-80h80c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM373.5 498.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.8-1.7-203.2 89.2-203.2 200 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.8-1.1 6.4-4.8 5.9-8.8zM824 472c0-109.4-87.9-198.3-196.9-200C516.3 270.3 424 361.2 424 472c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C357 742.6 326 814.8 324 891.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C505.8 695.7 563 672 624 672c110.4 0 200-89.5 200-200zm-109.5 90.5C690.3 586.7 658.2 600 624 600s-66.3-13.3-90.5-37.5a127.26 127.26 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4-.1 34.2-13.4 66.3-37.6 90.5z"></path></svg></span></span>加入我们</a></div></div><div class="rc-footer-column"><h2>帮助</h2><div class="rc-footer-item"><a href="https://github.com/ant-design/ant-design" target="_blank"><span class="rc-footer-item-icon"><span role="img" aria-label="github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></span></span>GitHub</a></div></div><div class="rc-footer-column"><h2><span class="rc-footer-column-icon"><img src="https://gw.alipayobjects.com/zos/rmsportal/nBVXkrFdWHxbZlmMbsaH.svg" alt="Ant XTech"/></span>更多产品</h2><div class="rc-footer-item"><a href="https://yuque.com" target="_blank"><span class="rc-footer-item-icon"><img src="https://gw.alipayobjects.com/zos/rmsportal/XuVpGqBFxXplzvLjJBZB.svg" alt="yuque"/></span>语雀</a><span class="rc-footer-item-separator">-</span><span class="rc-footer-item-description">知识创作与分享工具</span></div></div></section></section><section class="rc-footer-bottom"><div class="rc-footer-bottom-container">Made with <span style="color:#fff">❤</span> by<!-- --> <a target="_blank" rel="noopener noreferrer" href="https://xtech.antfin.com">XTech</a></div></section></footer></div></div></div></div>
    </div>
    
    <script src="/index-9d2d5fb1.js"></script>
    
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-72788897-1"></script>
    <script>
      if (!location.port) {
        // Enable Google Analytics
        window.dataLayer = window.dataLayer || [];
        function gtag() {
          dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-72788897-1');
      }
    </script>
    <!-- Hotjar Tracking Code for ant.design -->
    <script>
      (function(h, o, t, j, a, r) {
        h.hj =
          h.hj ||
          function() {
            (h.hj.q = h.hj.q || []).push(arguments);
          };
        h._hjSettings = { hjid: 473408, hjsv: 5 };
        a = o.getElementsByTagName('head')[0];
        r = o.createElement('script');
        r.async = 1;
        r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
        a.appendChild(r);
      })(window, document, '//static.hotjar.com/c/hotjar-', '.js?sv=');
    </script>
  </body>
</html>
